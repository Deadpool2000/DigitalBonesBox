<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bone Information Viewer</title>
    <style>
        .container {
            display: flex;
            width: 100%;
            margin: auto;
            padding: 20px;
        }

        .sidebar {
            width: 20%;
            background-color: #f1f1f1;
            padding: 10px;
        }

        .content {
            width: 80%;
            padding: 10px;
        }

        h2, h3 {
            margin-top: 0;
        }

        /* Style for dropdowns and bone information */
        select, input[type="text"] {
            width: 100%;
            padding: 5px;
            margin-bottom: 10px;
        }

        .bone-info img {
            width: 100%;
            max-width: 300px;
            margin-top: 10px;
        }

        button {
            margin-top: 10px;
            padding: 5px 10px;
        }
/* Sidebar and button styling */
.sidebar {
            width: 250px; /* Sidebar width */
            background-color: #f1f1f1;
            padding: 10px;
            transition: transform 0.3s ease;
            transform: translateX(0); /* Sidebar is visible by default */
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
            z-index: 999;
            position: relative; /* Position sidebar */
        }

/* When sidebar is hidden, translate it fully off-screen */
.sidebar.hidden {
    transform: translateX(-100%); /* Sidebar hidden */
}

/* Sidebar toggle button styling */
#toggle-sidebar {
    position: absolute; /* Position the button above the sidebar */
    top: -40px; /* Move the button above the sidebar */
    left: 0;
    border: none;
    cursor: pointer;
    width: 100%;
    padding: 15px;
    font-size: 18px;
    z-index: 1000; /* Ensure the button stays on top */
}

/* Adjust content when sidebar is expanded or collapsed */
.content {
            flex-grow: 1; /* Allow content area to grow and fill available space */
            padding: 10px;
            transition: margin-left 0.3s ease; /* Smooth transition when sidebar toggles */
            margin-left: 0px; /* Content starts next to sidebar by default */
        }

        /* When sidebar is hidden, adjust content margin to use full width */
        .content.expanded {
            margin-left: 0; /* Content takes full width when sidebar is hidden */   
        }
            

    </style>
</head>
<body>

<div class="container">

    
    <!-- Sidebar with Navigation -->
    <div class="sidebar">
             <!-- Toggle Button -->
        `
        <button id="toggle-sidebar" class="toggle-btn" style="width: 100%; padding: 15px 10px; font-size: 18px; background-color: grey; color: white; border: darkslategray; cursor: pointer;">                Navigation ‚ò∞
            </button>        
        
        <div>
        <ul>
            <li><span>üîç</span> Search</li>
            <li><span>üìû</span> Contact</li>
            <li><span>‚è∞</span> Recent</li>
            <li><span>‚ùì</span> Help</li>
        </ul>
        </div>
    </div>

    <!-- Main Content Area -->
    <div class="content">
        <h2>Bone Information Viewer</h2>
        
        <!-- Dropdown for Boneset Selection -->
        <label for="boneset-select">Bone set</label>
        <select id="boneset-select">
            <option value="">--Select a Boneset--</option>
        </select>
        
        <!-- Dropdown for Bone Selection within Boneset -->
        <label for="bone-select">Find bone</label>
        <select id="bone-select">
            <option value="">--Select a Bone--</option>
        </select>
        
        <!-- Display Selected Bone Set and Bone Information -->
        <div class="bone-info">
            <h3 id="bone-title">Selected Bone Information</h3>
            <p id="bone-description">A description will appear here.</p>
            <img id="bone-image" src="" alt="Bone Image" />
            <button id="edit-button" style="display: none;">Edit</button>
        </div>
    </div>
</div>

<script>
    const GITHUB_RAW_URL = 'https://raw.githubusercontent.com/oss-slu/DigitalBonesBox/data/databones/json/';
    const BONESET_JSON_PATH = 'boneset.json';

    let boneSets = [];

    // Function to fetch JSON data
    async function fetchJSON(path) {
        const response = await fetch(GITHUB_RAW_URL + path);
        return response.json();
    }

    // Populate boneset dropdown
    async function populateBoneSetDropdown() {
        if (boneSets.length === 0) {
            const data = await fetchJSON(BONESET_JSON_PATH);
            boneSets = data.boneset;
        }
        
        const bonesetSelect = document.getElementById('boneset-select');
        bonesetSelect.innerHTML = '<option value="">--Select a Boneset--</option>';
        
        boneSets.forEach(boneSet => {
            const option = document.createElement('option');
            option.value = boneSet.id;
            option.textContent = boneSet.name;
            bonesetSelect.appendChild(option);
        });
    }

    // Populate bones dropdown based on selected boneset
    function populateBonesDropdown(boneSetId) {
        const boneSelect = document.getElementById('bone-select');
        boneSelect.innerHTML = '<option value="">--Select a Bone--</option>';
        
        const selectedBoneSet = boneSets.find(boneSet => boneSet.id === boneSetId);
        if (selectedBoneSet) {
            selectedBoneSet.bones.forEach(boneId => {
                const option = document.createElement('option');
                option.value = boneId;
                option.textContent = `Bone ID: ${boneId}`;
                boneSelect.appendChild(option);
            });
        }
    }

    // Display information about the selected boneset
    function displayBoneSetInfo(boneSet) {
        document.getElementById('bone-title').textContent = `Selected bone from bone set: ${boneSet.name}`;
        document.getElementById('bone-description').textContent = boneSet.description;
        document.getElementById('bone-image').src = boneSet.image;
        document.getElementById('edit-button').style.display = 'block';
    }

    // Event listeners for dropdowns
    document.addEventListener('DOMContentLoaded', () => {
        populateBoneSetDropdown();

        document.getElementById('boneset-select').addEventListener('change', (event) => {
            const selectedBoneSetId = event.target.value;
            populateBonesDropdown(selectedBoneSetId);
            
            const selectedBoneSet = boneSets.find(boneSet => boneSet.id === selectedBoneSetId);
            if (selectedBoneSet) {
                displayBoneSetInfo(selectedBoneSet);
            }
        });

        document.getElementById('bone-select').addEventListener('change', (event) => {
            const selectedBoneId = event.target.value;
            console.log(`Selected Bone ID: ${selectedBoneId}`);
        });
    });

        // Sidebar Toggle
        document.getElementById('toggle-sidebar').addEventListener('click', function() {
            const sidebar = document.querySelector('.sidebar');
            const content = document.querySelector('.content');

            // Toggle the "hidden" class on the sidebar
            sidebar.classList.toggle('hidden');
            
            // Toggle the "expanded" class on the content
            content.classList.toggle('expanded');
        });
</script>

</body>
</html>
